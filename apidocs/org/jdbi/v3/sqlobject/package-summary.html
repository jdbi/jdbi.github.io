<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) on Thu Jul 13 21:30:20 UTC 2023 -->
<title>org.jdbi.v3.sqlobject (Jdbi3 3.40.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2023-07-13">
<meta name="description" content="declaration: package: org.jdbi.v3.sqlobject">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.jdbi.v3.sqlobject" class="title">Package org.jdbi.v3.sqlobject</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.jdbi.v3.sqlobject</span></div>
<section class="package-description" id="package-description">
<div class="block"><h2>SQL Objects</h2>
 <p>
 The SQLObject API allows for declarative definition of interfaces which will handle
 the generation of statements and queries on your behalf when needed. Take the following interface:
 </p>
 <pre>
 public interface TheBasics {
 &#64;SqlUpdate("insert into something (id, name) values (:id, :name)")
 int insert(&#64;BindBean Something something);
 &#64;SqlQuery("select id, name from something where id = :id")
 Something findById(&#64;Bind("id") long id);
 }
 </pre>
 <p>
 First, install the SQL Object plugin:
 </p>
 <pre>
 Jdbi jdbi = Jdbi.create(dataSource);
 jdbi.installPlugin(new SqlObjectPlugin());
 </pre>
 <p>
 You can obtain an instance of <code>TheBasics</code> via one of three means.
 </p>
 <ul>
 <li>
 <p>
 You can pass a lambda to Jdbi. A short-lived instance of the interface will be created, and passed to the
 lambda. The lambda can make any number of calls to that instance before returning. The lifecycle of
 the SQL Object instance ends when the lambda returns.
 </p>
 <pre>
 jdbi.useExtension(TheBasics.class, theBasics -&gt; theBasics.insert(new Something(1, "Alice")));
 Something result = jdbi.withExtension(TheBasics.class, theBasics -&gt; theBasics.findById(1));
 </pre>
 <p>
 <code>withExtension</code> returns the value returned by the lambda, whereas <code>useExtension</code>
 has a void return.
 </p>
 </li>
 <li>
 <p>
 You can get an instance attached to a particular handle. The SQL Object's lifecycle ends when the
 handle is closed.
 </p>
 <pre>
 try (Handle handle = jdbi.open()) {
 TheBasics attached = handle.attach(TheBasics.class);
 attached.insert(new Something(2, "Bob");
 Something result = attached.findById(2);
 }
 </pre>
 </li>
 <li>
 <p>
 Finally, you can request an on-demand instance. On-demand instances have an open-ended lifecycle, as they
 obtain and releases connections for each method call. They are thread-safe, and may be reused across an
 application. This is handy when you only need to make single calls at a time.
 </p>
 <pre>
 TheBasics onDemand = jdbi.onDemand(TheBasics.class);
 onDemand.insert(new Something(3, "Chris"));
 Something result = onDemand.findById(3);
 </pre>
 <p>
 There is a performance penalty every time a connection is allocated and released. If you need to make
 multiple calls in a row to a SQL Object, consider using one of the above options for
 better performance, instead of on-demand.
 </p>
 </li>
 </ul>
 <h2>Default Methods</h2>
 <p>
 You can declare default methods on your interface, which can call other methods of the interface:
 </p>
 <pre>
 public interface DefaultMethods {
 &#64;SqlQuery("select * from folders where id = :id")
 Folder getFolderById(int id);
 &#64;SqlQuery("select * from documents where folder_id = :folderId")
 List&lt;Document&gt; getDocuments(int folderId);
 default Node getFolderByIdWithDocuments(int id) {
 Node result = getById(id);
 result.setChildren(listByParendId(id));
 return result;
 }
 }
 </pre>
 <h2>Mixin Interfaces</h2>
 <p>
 All SQL objects implicitly implement the <code>SqlObject</code> interface (whether you declare it or not), which
 provides a <code>getHandle()</code> method. This is handy when you need to "drop down" to the core API for
 scenarios not directly supported by SQL Object:
 </p>
 <pre>
 public interface UsingMixins extends SqlObject {
 &#64;RegisterBeanMapper(value={Folder.class, Document.class}, prefix={"f", "d"})
 default Folder getFolder(int id) {
 return getHandle().createQuery(
 "select f.id f_id, f.name f_name, " +
 "d.id d_id, d.name d_name, d.contents d_contents " +
 "from folders f left join documents d " +
 "on f.id = d.folder_id " +
 "where f.id = :folderId")
 .bind("folderId", id)
 .reduceRows(Optional.&lt;Folder&gt;empty(), (folder, row) -&gt; {
 Folder f = folder.orElseGet(() -&gt; row.getRow(Folder.class));
 if (row.getColumn("d_id", Integer.class) != null) {
 f.getDocuments().add(row.getRow(Document.class));
 }
 return Optional.of(f);
 });
 }
 }
 </pre>
 <p>
 Any interface that extends <code>SqlObject</code> can be used as a SQL Object mixin, provided all of its methods
 have a SQL method annotation (e.g. <code>&#64;SqlQuery</code>, or are interface default methods.
 </p>
 <h2>Transactions</h2>
 <p>
 Any SQL Object method annotation with <code>&#64;Transaction</code> will be executed within a transaction.
 This is most commonly used on interface default methods to roll up multiple method calls:
 </p>
 <pre>
 public interface TransactionAnnotation {
 &#64;SqlUpdate("insert into folders (id, name) values (:id, :name)")
 void insertFolder(&#64;BindBean Folder folder)
 &#64;SqlBatch("insert into documents (id, folder_id, name, content) " +
 "values (:id, :folderId, :name, :content)")
 void insertDocuments(int folderId, &#64;BindBean List&lt;Document&gt; documents);
 &#64;Transaction
 default void insertFolderWithDocuments(Folder folder) {
 insertFolder(folder);
 insertDocuments(folder.getId(), folder.getDocuments());
 }
 }
 </pre>
 <p>
 Jdbi also provides a <code>Transactional</code> mixin interface. When a SQL Object type extends this interface,
 callers may invoke method from that interface to manage transactions:
 </p>
 <pre>
 public interface TransactionalWithDefaultMethods extends Transactional {
 &#64;SqlUpdate("insert into folders (id, name) values (:id, :name)")
 void insertFolder(&#64;BindBean Folder folder)
 &#64;SqlBatch("insert into documents (id, folder_id, name, content) " +
 "values (:id, :folderId, :name, :content)")
 void insertDocuments(int folderId, &#64;BindBean List&lt;Document&gt; documents);
 }
 </pre>
 <p>
 Thus:
 </p>
 <pre>
 TransactionalWithDefaultMethods dao = jdbi.onDemand(TransactionalWithDefaultMethods.class);
 dao.inTransaction(self -&gt; {
 self.insert(folder);
 self.insertDocuments(folder.getId(), folder.getDocuments());
 });
 </pre>
 <p>
 <b>
 Note: use caution combining <code>Transactional</code> with on-demand SQL Objects.
 </b>
 The only methods considered safe to call with on-demand SQL Objects are <code>inTransaction</code> or
 <code>useTransaction</code>.
 </p></div>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="config/package-summary.html">org.jdbi.v3.sqlobject.config</a></div>
<div class="col-last even-row-color">
<div class="block">
 The <code>sqlobject.config</code> package defines configuration annotations
 that modify the <code>Jdbi</code> configuration used as the context for executing
 SqlObject methods, such as registering handled types.</div>
</div>
<div class="col-first odd-row-color"><a href="customizer/package-summary.html">org.jdbi.v3.sqlobject.customizer</a></div>
<div class="col-last odd-row-color">
<div class="block">
 The <code>sqlobject.customizer</code> package provides annotations
 that customize the execution of a statement.</div>
</div>
<div class="col-first even-row-color"><a href="locator/package-summary.html">org.jdbi.v3.sqlobject.locator</a></div>
<div class="col-last even-row-color">
<div class="block">
 <code>sqlobject.locator</code> inspects the declared SqlObject and determines
 the statement text to pass off to <code>core.locator</code> for final
 resolution of the statement text.</div>
</div>
<div class="col-first odd-row-color"><a href="statement/package-summary.html">org.jdbi.v3.sqlobject.statement</a></div>
<div class="col-last odd-row-color">
<div class="block">
 The <code>sqlobject.statement</code> annotations declare the type of statement
 that a SqlObject method should create, such as a <code>@SqlQuery</code> to return rows or a
 <code>@SqlUpdate</code> to modify rows and return the modification count.</div>
</div>
<div class="col-first even-row-color"><a href="transaction/package-summary.html">org.jdbi.v3.sqlobject.transaction</a></div>
<div class="col-last even-row-color">
<div class="block">
 <code>sqlobject.transaction</code> annotations declaratively create transactions
 wrapping a SqlObject method.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exceptions</button><button id="class-summary-tab7" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab7', 2)" class="table-tab">Annotation Types</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab7"><a href="CreateSqlObject.html" title="annotation in org.jdbi.v3.sqlobject">CreateSqlObject</a></div>
<div class="col-last even-row-color class-summary class-summary-tab7">
<div class="block">Use this annotation on a sql object method to create a new sql object with the same underlying handle as the sql
 object the method is invoked on.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab7"><a href="DecoratorOrder.html" title="annotation in org.jdbi.v3.sqlobject">DecoratorOrder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab7">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/annotation/UseExtensionHandlerCustomizer.html" title="annotation in org.jdbi.v3.core.extension.annotation"><code>UseExtensionHandlerCustomizer</code></a> to mark annotations and
 <a href="../core/extension/annotation/ExtensionHandlerCustomizationOrder.html" title="annotation in org.jdbi.v3.core.extension.annotation"><code>ExtensionHandlerCustomizationOrder</code></a> instead.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab7"><a href="GenerateSqlObject.html" title="annotation in org.jdbi.v3.sqlobject">GenerateSqlObject</a></div>
<div class="col-last even-row-color class-summary class-summary-tab7">
<div class="block">Decorate a SqlObject type to instruct the <code>jdbi3-generator</code> annotation processor
 to create a compiled implementation.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="Handler.html" title="interface in org.jdbi.v3.sqlobject">Handler</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/ExtensionHandler.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandler</code></a> directly.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="HandlerDecorator.html" title="interface in org.jdbi.v3.sqlobject">HandlerDecorator</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/ExtensionHandlerCustomizer.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandlerCustomizer</code></a> directly.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="HandlerDecorators.html" title="class in org.jdbi.v3.sqlobject">HandlerDecorators</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/ExtensionHandlerCustomizer.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandlerCustomizer</code></a> instances which are returned directly
 from the <a href="../core/extension/ExtensionFactory.html#getExtensionHandlerCustomizers(org.jdbi.v3.core.config.ConfigRegistry)"><code>ExtensionFactory.getExtensionHandlerCustomizers(ConfigRegistry)</code></a>.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="HandlerFactory.html" title="interface in org.jdbi.v3.sqlobject">HandlerFactory</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/ExtensionHandlerFactory.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandlerFactory</code></a> instances directly.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Handlers.html" title="class in org.jdbi.v3.sqlobject">Handlers</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/ExtensionHandlerFactory.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandlerFactory</code></a> instances that are returned
 from the <a href="../core/extension/ExtensionFactory.html#getExtensionHandlerFactories(org.jdbi.v3.core.config.ConfigRegistry)"><code>ExtensionFactory.getExtensionHandlerFactories(ConfigRegistry)</code></a> method.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab7"><a href="SingleValue.html" title="annotation in org.jdbi.v3.sqlobject">SingleValue</a></div>
<div class="col-last even-row-color class-summary class-summary-tab7">
<div class="block">Indicate to SqlObject that a type that looks like a container
 should be treated as a single element.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab7"><a href="SqlMethodDecoratingAnnotation.html" title="annotation in org.jdbi.v3.sqlobject">SqlMethodDecoratingAnnotation</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab7">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/annotation/UseExtensionHandlerCustomizer.html" title="annotation in org.jdbi.v3.core.extension.annotation"><code>UseExtensionHandlerCustomizer</code></a> instead
 and implement <a href="../core/extension/ExtensionHandlerCustomizer.html" title="interface in org.jdbi.v3.core.extension"><code>ExtensionHandlerCustomizer</code></a> for the value.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="SqlObject.html" title="interface in org.jdbi.v3.sqlobject">SqlObject</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">SqlObject base interface.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SqlObjectFactory.html" title="class in org.jdbi.v3.sqlobject">SqlObjectFactory</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Creates implementations for SqlObject interfaces.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="SqlObjectPlugin.html" title="class in org.jdbi.v3.sqlobject">SqlObjectPlugin</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Plugin that installs the SqlObject extension.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SqlObjects.html" title="class in org.jdbi.v3.sqlobject">SqlObjects</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Configuration class for SQL objects.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab7"><a href="SqlOperation.html" title="annotation in org.jdbi.v3.sqlobject">SqlOperation</a></div>
<div class="col-last even-row-color class-summary class-summary-tab7">Deprecated.
<div class="deprecation-comment">Use <a href="../core/extension/annotation/UseExtensionHandler.html" title="annotation in org.jdbi.v3.core.extension.annotation"><code>UseExtensionHandler</code></a> and <a href="SqlObjectFactory.html#EXTENSION_ID"><code>SqlObjectFactory.EXTENSION_ID</code></a> as the id marker.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="UnableToCreateSqlObjectException.html" title="class in org.jdbi.v3.sqlobject">UnableToCreateSqlObjectException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Thrown when constructing a SqlObject fails.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2023. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>